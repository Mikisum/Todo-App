(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[755],{4219:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/todo",function(){return n(877)}])},877:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return F}});var o={};n.r(o),n.d(o,{addTodo:function(){return m},fetchTodos:function(){return h},setTodoPage:function(){return y},setTotalTodosCount:function(){return v},todoDelete:function(){return T},todoOnChange:function(){return x}});var r=n(5893),a=n(7294),c=n(2332),u=n(4890),s=n(4051),i=n.n(s),d=n(9669),l=n.n(d),p=n(5944);function f(t,e,n,o,r,a,c){try{var u=t[a](c),s=u.value}catch(i){return void n(i)}u.done?e(s):Promise.resolve(s).then(o,r)}function _(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function c(t){f(a,o,r,c,u,"next",t)}function u(t){f(a,o,r,c,u,"throw",t)}c(void 0)}))}}var h=function(){return function(){var t=_(i().mark((function t(e){var n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e({type:p.X.FETCH_TODOS}),t.next=4,l().get("https://jsonplaceholder.typicode.com/todos");case 4:n=t.sent,o=n.data.length,e({type:p.X.FETCH_TODOS_SUCCESS,payload:n.data}),e({type:p.X.SET_TOTAL_TODOS_COUNT,payload:o}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e({type:p.X.FETCH_TODOS_ERROR,payload:"An error occurred while uploading users"});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},m=function(t){return function(){var e=_(i().mark((function e(n){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={userId:1,title:t,completed:!1},e.next=4,l().post("https://jsonplaceholder.typicode.com/todos",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(o)});case 4:e.sent,n({type:p.X.TODO_ADD,payload:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n({type:p.X.FETCH_TODOS_ERROR,payload:"An error occurred while uploading users"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},x=function(t){return function(){var e=_(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().patch("https://jsonplaceholder.typicode.com/todos/".concat(t.id),{method:"PUTCH",headers:{"content-type":"application/json"},body:JSON.stringify({todo:t})});case 3:e.sent,n({type:p.X.TODO_ONCHANGE,payload:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({type:p.X.FETCH_TODOS_ERROR,payload:"An error occurred while uploading users"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},v=function(t){return{type:p.X.SET_TOTAL_TODOS_COUNT,payload:t}},y=function(t){return{type:p.X.SET_TODO_PAGE,payload:t}},T=function(t){return function(){var e=_(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().patch("https://jsonplaceholder.typicode.com/todos/".concat(t.id),{method:"PUTCH",headers:{"content-type":"application/json"},body:JSON.stringify({todo:t})});case 3:e.sent,n({type:p.X.TODO_DELETE,payload:t.id}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({type:p.X.FETCH_TODOS_ERROR,payload:"An error occurred while uploading users"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},g=function(){var t=(0,c.I0)();return(0,u.DE)(o,t)},b=c.v9,O=n(4184),C=n.n(O),N=n(939),j=n.n(N);var E=function(t){for(var e=t.totalItemsCount,n=t.limit,o=t.currentPage,c=t.portionSize,u=void 0===c?5:c,s=t.onPageChanged,i=Math.ceil(e/n),d=[],l=1;l<=i;l++)d.push(l);var p=Math.ceil(i/u),f=(0,a.useState)(1),_=f[0],h=f[1],m=(_-1)*u+1,x=_*u;return(0,r.jsxs)("div",{className:j().paginator,children:[_>1&&(0,r.jsx)("button",{className:j().button,onClick:function(){h(_-1)},children:"\xab"}),d.filter((function(t){return t>=m&&t<=x})).map((function(t){return(0,r.jsx)("span",{className:C()((e={},n=j().selectedPage,a=o===t,n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e),j().pageNumber),onClick:function(e){console.log(t),s(t)},children:t},t);var e,n,a})),p>_&&(0,r.jsx)("button",{className:j().button,onClick:function(){h(_+1)},children:"\xbb"})]})},S=n(8674),k=n.n(S),w=function(){var t=(0,a.useState)(""),e=t[0],n=t[1],o=b((function(t){return t.todos})).todos,c=g(),u=c.addTodo,s=c.setTotalTodosCount;return(0,r.jsxs)("form",{className:k().form,onSubmit:function(t){t.preventDefault(),e&&(u(e),s(o.length+1),n(""))},children:[(0,r.jsx)("input",{type:"text",className:k().text,value:e,onChange:function(t){return n(t.target.value)},placeholder:"Enter your note",autoComplete:"false"}),(0,r.jsx)("input",{className:k().submit,type:"submit",value:"Add"})]})},P=n(1436),D=n(7814),L=n(6069),I=n.n(L),G=function(t){var e=t.todo,n=b((function(t){return t.todos})).todos,o=(0,a.useState)(!1),c=o[0],u=o[1],s=(0,a.useState)(e.title),i=s[0],d=s[1],l=(0,a.useState)(e.completed),p=l[0],f=l[1],_=g(),h=_.todoDelete,m=_.todoOnChange,x=_.setTotalTodosCount;return(0,r.jsxs)("li",{className:I().todoListItem,children:[(0,r.jsx)("input",{type:"checkbox","aria-label":"Checkbox for following text input",className:I().checkbox,checked:p,onChange:function(){f(!p),m({userId:1,id:e.id,title:i,completed:p})}}),c?(0,r.jsx)("input",{defaultValue:i,className:I().text,onChange:function(t){return d(t.target.value)}}):(0,r.jsx)("span",{children:i}),(0,r.jsxs)("div",{className:I().buttonsGroup,children:[(0,r.jsx)("button",{className:I().button,type:"button",onClick:function(){return function(){if(c){var t={userId:1,id:e.id,title:i,completed:e.completed};m(t)}u(!c),console.log(i)}()},children:c?(0,r.jsx)(D.G,{icon:P.fV7,className:I().icon}):(0,r.jsx)(D.G,{icon:P.IwR,className:I().icon})}),(0,r.jsx)("button",{className:I().button,type:"button",onClick:function(){h(e),x(n.length-1)},children:(0,r.jsx)(D.G,{icon:P.$aW,color:"red",className:I().icon})})]})]})},R=n(3656),X=n.n(R),A=function(){var t=b((function(t){return t.todos})),e=t.todos,n=t.loading,o=(t.error,t.page),c=t.limit,u=t.totalTodosCount,s=g(),i=s.fetchTodos,d=s.setTodoPage,l=(0,a.useState)([]),p=l[0],f=l[1];return(0,a.useEffect)((function(){i()}),[]),(0,a.useEffect)((function(){var t=e.slice((o-1)*c,o*c);f(t)}),[e,o]),(0,r.jsxs)("div",{className:X().todoList,children:[n&&(0,r.jsx)("h1",{children:"loading..."}),(0,r.jsx)(w,{}),(0,r.jsx)("ul",{className:X().listGroup,children:p.map((function(t){return(0,r.jsx)(G,{todo:t},t.id)}))}),(0,r.jsx)(E,{currentPage:o,onPageChanged:d,totalItemsCount:u,limit:c})]})};function F(){return(0,r.jsx)(A,{})}},8674:function(t){t.exports={form:"todoForm_form__IkGed",text:"todoForm_text__pZEZ0",submit:"todoForm_submit__CqvGY"}},3656:function(t){t.exports={listGroup:"todoList_listGroup__WSEOv",todoList:"todoList_todoList__0Z2HM"}},6069:function(t){t.exports={todoListItem:"todoListItem_todoListItem__zGlP0",text:"todoListItem_text__avGe9",buttonsGroup:"todoListItem_buttonsGroup__LmWxC",button:"todoListItem_button__xZFOL",icon:"todoListItem_icon__Bz3KS",checkbox:"todoListItem_checkbox__YOedK"}},939:function(t){t.exports={paginator:"Paginator_paginator__wqSRs",selectedPage:"Paginator_selectedPage__T_vQU",pageNumber:"Paginator_pageNumber__KGbkT",button:"Paginator_button__ZpAIK"}}},function(t){t.O(0,[523,247,774,888,179],(function(){return e=4219,t(t.s=e);var e}));var e=t.O();_N_E=e}]);